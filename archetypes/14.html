<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
    @page { size: A4; margin: 0; }
    @media print { body { -webkit-print-color-adjust: exact; } }
    
    body { 
        margin: 0; 
        padding: 40px;
        font-family: 'Helvetica', 'Arial', sans-serif; 
        color: #333; 
        background: #fff;
    }

    /* Top Title */
    .doc-type-header {
        font-size: 36px;
        font-weight: bold;
        text-transform: uppercase;
        margin-bottom: 20px;
        letter-spacing: 2px;
    }

    /* Branding & Payment Box */
    .branding-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        border: 1px solid #000;
        margin-bottom: 30px;
    }

    .brand-side {
        padding: 20px;
        border-right: 1px solid #000;
    }
    .brand-side h1 { margin: 0; font-size: 22px; text-transform: uppercase; }
    .brand-side p { margin: 5px 0 0; font-style: italic; font-size: 13px; }

    .payment-side {
        padding: 20px;
        font-size: 12px;
        line-height: 1.6;
    }

    /* Contact & Meta Info Grid */
    .meta-info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        border-top: 1px solid #000;
        border-bottom: 1px solid #000;
        padding: 15px 0;
        margin-bottom: 15px;
    }

    .info-block { padding: 0 20px; font-size: 13px; }
    .label { font-weight: bold; text-transform: uppercase; font-size: 11px; margin-right: 10px; width: 100px; display: inline-block; }

    /* Logistics Bar - Detailed Grid */
    .logistics-grid {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        border: 1px solid #000;
        background: #f9f9f9;
        margin-bottom: 30px;
    }

    .log-cell {
        padding: 10px 5px;
        border-right: 1px solid #000;
        text-align: center;
    }
    .log-cell:last-child { border-right: none; }
    .log-label { display: block; font-size: 9px; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; }
    .log-value { font-size: 11px; }

    /* Main Product Table */
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    
    thead th {
        border-top: 1px solid #000;
        border-bottom: 1px solid #000;
        padding: 10px;
        text-align: left;
        font-size: 11px;
        text-transform: uppercase;
    }

    tbody td {
        padding: 12px 10px;
        font-size: 12px;
        border-bottom: 1px solid #eee;
    }

    /* Totals Calculation Area */
    .totals-container {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        margin-bottom: 40px;
    }

    .totals-row {
        width: 300px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        padding: 5px 15px;
        font-size: 13px;
    }

    .grand-total-box {
        border: 1px solid #000;
        background: #f2f2f2;
        font-weight: bold;
        padding: 10px 15px;
        margin-top: 10px;
    }

    /* Bottom Thank You Banner */
    .footer-banner {
        border: 1px solid #000;
        padding: 15px;
        text-align: center;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-size: 16px;
    }
</style>
</head>
<body>

    <div class="doc-type-header">{{ invoice.title }}</div>

    <section class="branding-grid">
        <div class="brand-side">
            <h1>{{ company.name }}</h1>
            <p>Be uniquely you</p>
        </div>
        <div class="payment-side">
            <strong>Make all checks payable to</strong><br>
            {{ company.address }}
        </div>
    </section>

    <div class="meta-info-grid">
        <div class="info-block">
            <p><span class="label">TO:</span> {{ buyer.name }}</p>
            <p><span class="label"></span> {{ buyer.address }}</p>
        </div>
        <div class="info-block">
            <p><span class="label">DATE:</span> {{ invoice.date }}</p>
        </div>
    </div>

    <div class="meta-info-grid" style="border-top: none; margin-top: -15px;">
        <div class="info-block">
            <p><span class="label">INVOICE #:</span> {{ invoice.number }}</p>
        </div>
        <div class="info-block">
            <p><span class="label">SHIP TO:</span> {{ notify.address if notify.address else buyer.address }}</p>
            </p>
        </div>
    </div>


    <table>
        <thead>
            <tr>
                <th style="width: 10%;">Qty</th>
                <th style="width: 15%;">Item #</th>
                <th style="width: 35%;">Description</th>
                <th style="width: 15%;">Unit Price</th>
                <th style="width: 10%;">Discount</th>
                <th style="width: 15%; text-align: right;">Line Total</th>
            </tr>
        </thead>
        <tbody>
            {% for it in items %}
            <tr>
                <td>{{ it.qty }}</td>
                <td>{{ it.item_no }}</td>
                <td>{{ it.description }}</td>
                <td>{{ it.rate }}</td>
                <td>$0.00</td> <td style="text-align: right;">{{ it.amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="totals-container">
        <div class="totals-row"><span>Total Discount</span> <span>$0.00</span></div>
        <div class="totals-row"><span>Subtotal</span> <span>{{ totals.subtotal }}</span></div>
        <div class="totals-row"><span>Sales Tax</span> <span>{{ totals.other }}</span></div>
        <div class="totals-row grand-total-box">
            <span>TOTAL</span>
            <span style="text-align: right;">{{ totals.grand_total }}</span>
        </div>
        <p style="font-size: 10px; margin-top: 10px; font-style: italic;">{{ totals.amount_in_words }}</p>
    </div>

    <footer class="footer-banner">
        Thank you for your business
    </footer>

</body>
</html>