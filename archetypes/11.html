<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
    @page { size: A4; margin: 0; }
    @media print { body { -webkit-print-color-adjust: exact; } }
    
    body { 
        margin: 0; 
        padding: 50px;
        font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
        color: #444; 
        background: #f4f7f6; /* Very soft mint-gray background */
    }

    .container {
        background: #fff;
        padding: 40px;
        min-height: 1000px;
        box-shadow: 0 0 20px rgba(0,0,0,0.05);
    }

    /* Header with Logo Block */
    .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 40px;
    }

    .logo-section { display: flex; align-items: center; }
    .logo-box {
        background: #3d4e4b; /* Dark botanical green */
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 20px;
    }
    .logo-box svg { width: 50px; fill: white; }

    .company-info h1 { margin: 0; font-size: 24px; color: #3d4e4b; }
    .company-info p { margin: 5px 0; font-style: italic; color: #888; font-size: 14px; }

    .doc-type { font-size: 48px; color: #3d4e4b; font-weight: 300; margin: 0; }

    /* Client and Date Grid */
    .client-date-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        margin-bottom: 40px;
        font-size: 13px;
    }
    .meta-data { text-align: right; line-height: 1.8; }

    /* Role/Status Bar */
    .status-bar {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        background: #3d4e4b;
        color: #fff;
        margin-bottom: 30px;
    }
    .status-cell { padding: 10px 15px; border-right: 1px solid rgba(255,255,255,0.1); }
    .status-cell:last-child { border-right: none; }
    .status-label { display: block; font-size: 10px; font-weight: bold; text-transform: uppercase; margin-bottom: 2px; }
    .status-value { font-size: 12px; }

    /* Table Styling */
    table { width: 100%; border-collapse: collapse; margin-bottom: 40px; }
    thead th {
        text-align: left;
        background: #3d4e4b;
        color: #fff;
        padding: 12px;
        font-size: 11px;
        text-transform: uppercase;
    }
    tbody td {
        padding: 15px 12px;
        border-bottom: 1px solid #eee;
        font-size: 13px;
    }
    tbody tr:nth-child(even) { background: #f9f9f9; }

    /* Summary Section */
    .summary-section {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
    }
    .summary-item {
        width: 250px;
        display: flex;
        justify-content: space-between;
        padding: 10px;
        margin-bottom: 5px;
        background: #f9f9f9;
        font-size: 14px;
    }
    .summary-item.total {
        background: #3d4e4b;
        color: #fff;
        font-weight: bold;
        font-size: 16px;
    }

    /* Footer */
    .footer {
        margin-top: 60px;
        text-align: center;
        font-size: 11px;
        color: #999;
        line-height: 1.6;
    }
</style>
</head>
<body>

<div class="container">
    <header class="header">
        <div class="logo-section">
            <div class="logo-box">
                <svg viewBox="0 0 24 24"><path d="M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z"/></svg>
            </div>
            <div class="company-info">
                <h1>{{ company.name }}</h1>
                <p>Happy plants means happy people</p>
            </div>
        </div>
        <h2 class="doc-type">{{ invoice.title }}</h2>
    </header>

    <div class="client-date-row">
        <div>
            <span style="font-weight:bold; color:#3d4e4b;">To:</span><br>
            <strong>{{ buyer.name }}</strong><br>
            {{ buyer.address }}
        </div>
        <div class="meta-data">
            <strong>Date:</strong> {{ invoice.date }}<br>
            <strong>{{ invoice.title }} #:</strong> {{ invoice.number }}<br>
            <strong>Customer ID:</strong> {{ buyer.customer_id if buyer.customer_id else 'ID-99' }}
        </div>
    </div>


    <table>
        <thead>
            <tr>
                <th style="width: 10%;">Qty</th>
                <th style="width: 50%;">Description</th>
                <th style="width: 20%;">Unit Price</th>
                <th style="width: 20%; text-align: right;">Line Total</th>
            </tr>
        </thead>
        <tbody>
            {% for it in items %}
            <tr>
                <td>{{ it.qty }} {{ it.unit }}</td>
                <td><strong>{{ it.item_no }}</strong> - {{ it.description }}</td>
                <td>{{ it.rate }}</td>
                <td style="text-align: right;">{{ it.amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="summary-section">
        <div class="summary-item">
            <span>Subtotal</span>
            <span>{{ totals.subtotal }}</span>
        </div>
        <div class="summary-item">
            <span>Sales Tax ({{ totals.insurance }}%)</span>
            <span>{{ totals.other }}</span>
        </div>
        <div class="summary-item total">
            <span>Total</span>
            <span>{{ totals.grand_total }}</span>
        </div>
        <p style="font-size: 11px; margin-top: 10px; color: #888;">
            <em>{{ totals.amount_in_words }}</em>
        </p>
    </div>

    <footer class="footer">
        Make all checks payable to {{ company.name }}<br>
        Thank you for your business!<br>
        {{ company.address }} | Bank: {{ bank.bank_name }} A/C: {{ bank.account_no }}
    </footer>
</div>

</body>
</html>