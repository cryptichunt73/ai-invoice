<!doctype html>
<html>
<head>
    <style>
        @page { size: A4; margin: 0; }
        body { 
            margin: 0; 
            font-family: 'Arial', sans-serif; 
            background: #eeeeee; 
            padding: 30px; 
            font-size: 9px; 
            text-transform: uppercase; 
        }
        .canvas { 
            background: #ffffff; 
            border: 1px solid #999999; 
            min-height: 250mm; 
            padding: 0; 
            position: relative; 
        }
        .crosshair { position: absolute; width: 20px; height: 20px; border-top: 1px solid #000; border-left: 1px solid #000; }
        .ch-tl { top: 10px; left: 10px; }
        .ch-tr { top: 10px; right: 10px; transform: rotate(90deg); }
        .ch-bl { bottom: 10px; left: 10px; transform: rotate(-90deg); }
        .ch-br { bottom: 10px; right: 10px; transform: rotate(180deg); }
        .header { display: flex; border-bottom: 1px solid #000; }
        .box { padding: 15px; border-right: 1px solid #000; }
        .box:last-child { border-right: none; }
        .title-box { background: #000000; color: #ffffff; flex: 1; }
        .main-grid { display: grid; grid-template-columns: 2fr 1fr; border-bottom: 1px solid #000; }
        .content-pane { padding: 20px; }
        .item-listing { padding: 20px; }
        .item-card { border: 1px solid #000; margin-bottom: 10px; display: flex; }
        .card-num { background: #000; color: #fff; padding: 10px; width: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; }
        .card-body { padding: 10px; flex-grow: 1; }
        .footer-rail { position: absolute; bottom: 0; width: 100%; height: 60px; border-top: 1px solid #000; display: flex; }
        @media print { body { background: #fff !important; } }

    </style>
</head>
<body>
    <div class="canvas">
        <div class="crosshair ch-tl"></div><div class="crosshair ch-tr"></div>
        <div class="crosshair ch-bl"></div><div class="crosshair ch-br"></div>

        <div class="header">
            <div class="box title-box"><h1>{{ invoice.title }}</h1></div>
            <div class="box">DATE: {{ invoice.date }}<br>REF: {{ invoice.number }}</div>
            <div class="box">CAT: {{ category }}</div>
        </div>

        <div class="main-grid">
            <div class="content-pane">
                <strong>EXPORTER:</strong><br>{{ company.name }}<br>{{ company.address }}<br><br>
                <strong>CONSIGNEE:</strong><br>{{ buyer.name }}<br>{{ buyer.address }}
            </div>
            <div class="content-pane" style="background:#f9f9f9; border-left: 1px solid #000;">
                <strong>TRANSIT:</strong><br>
                METHOD: {{ invoice.shipment_method }}<br>
                LOAD: {{ invoice.port_loading }}<br>
                DISCH: {{ invoice.port_discharge }}
            </div>
        </div>

        <div class="item-listing">
            {% for it in items %}
            <div class="item-card">
                <div class="card-num">{{ it.sl_no }}</div>
                <div class="card-body">
                    <strong>{{ it.item_no }}</strong> | {{ it.description }}<br>
                    QTY: {{ it.qty }} {{ it.unit }} @ {{ it.rate }} = {{ it.amount }}
                </div>
            </div>
            {% endfor %}
        </div>

        <div style="padding: 20px; text-align: right; font-size: 24px; font-weight: bold;">
            TOTAL: {{ totals.grand_total }}
        </div>

        <!-- Added missing tags requested -->
        <div style="padding: 0 20px 12px 20px; text-align: right;">
            AMOUNT IN WORDS: {{ totals.amount_in_words }}
        </div>

        <div class="footer-rail">
            <div class="box" style="flex: 2">
                BANK: {{ bank.bank_name }} |
                ACCOUNT NO: {{ bank.account_no }} |
                IBAN: {{ bank.iban }} |
                SWIFT: {{ bank.swift }}
            </div>
            <div class="box" style="flex: 1; font-size: 7px;">VERIFICATION REQUIRED. ALL FIGURES IN BASE CURRENCY.</div>
        </div>
    </div>

    <div class="tab-top">{{ invoice.number }} â€¢ {{ invoice.date }}</div>
    This is a computer-generated invoice
</body>
</html>
