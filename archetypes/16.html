<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
    @page { size: A4; margin: 0; }
    @media print { body { -webkit-print-color-adjust: exact; } }
    
    body { 
        margin: 0; 
        padding: 60px;
        font-family: 'Segoe UI', Arial, sans-serif; 
        color: #1a1a1a; 
        background: #fff;
        line-height: 1.5;
    }

    /* Header Section */
    .header {
        display: flex;
        flex-direction: column;
        margin-bottom: 50px;
    }

    .doc-type {
        font-size: 38px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 15px;
    }

    .company-name {
        font-size: 22px;
        font-weight: 700;
        margin-bottom: 20px;
    }

    /* Info Grid */
    .top-info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        font-size: 13px;
        margin-bottom: 40px;
    }

    .sender-details p { margin: 2px 0; color: #444; }

    .meta-details {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 5px 20px;
        justify-self: end;
    }

    .meta-label { font-weight: 700; color: #8e44ad; text-transform: uppercase; font-size: 11px; }
    .meta-value { text-align: left; }

    /* Subject Line */
    .subject-line {
        font-size: 16px;
        font-weight: 600;
        text-transform: uppercase;
        border-bottom: 2px solid #1a1a1a;
        padding-bottom: 10px;
        margin-bottom: 30px;
        letter-spacing: 0.5px;
    }

    /* Clean Manufacturing Table */
    table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
    
    thead th {
        text-align: left;
        padding: 10px 0;
        font-size: 12px;
        text-transform: uppercase;
        border-bottom: 1px solid #000;
        color: #000;
    }

    tbody td {
        padding: 15px 0;
        font-size: 14px;
        border-bottom: 1px solid #eee;
    }

    .currency-symbol { color: #888; margin-right: 5px; }

    /* Totals Layout */
    .totals-area {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
    }

    .totals-row {
        width: 320px;
        display: grid;
        grid-template-columns: 1fr auto 100px;
        padding: 8px 0;
        font-size: 13px;
        border-bottom: 1px solid #f2f2f2;
    }

    .totals-row.grand-total {
        background-color: #f5f5f5;
        font-weight: 800;
        font-size: 16px;
        border-bottom: none;
        padding: 12px 10px;
        margin-top: 5px;
    }

    /* Footer */
    .footer {
        margin-top: 80px;
        font-size: 11px;
        color: #555;
    }

    .footer p { margin: 4px 0; }
    .footer strong { color: #000; text-transform: uppercase; display: block; margin-top: 15px; }

</style>
</head>
<body>

    <header class="header">
        <div class="doc-type">{{ invoice.title }}</div>
        <div class="company-name">{{ company.name }}</div>
    </header>

    <div class="top-info-grid">
        <div class="sender-details">
            <p>{{ company.address }}</p>
            <p>Phone: {{ company.phone if company.phone else '(312) 555-0113' }}</p>
            <p>{{ company.email if company.email else 'manufacturing@example.com' }}</p>
        </div>
        
        <div class="meta-details">
            <span class="meta-label">Date:</span> 
            <span class="meta-value">{{ invoice.date }}</span>
            
            <span class="meta-label">{{ invoice.title }} #:</span> 
            <span class="meta-value">{{ invoice.number }}</span>
            
            <span class="meta-label">Bill To:</span> 
            <span class="meta-value">
                <strong>{{ buyer.name }}</strong><br>
                {{ buyer.address }}<br>
                {{ buyer.phone if buyer.phone else '' }}
            </span>
        </div>
    </div>

    <div class="subject-line">
        {{ category if category else 'Custom Machine Parts Manufacturing' }}
    </div>

    <table>
        <thead>
            <tr>
                <th style="width: 70%;">Description</th>
                <th style="width: 30%; text-align: right;">Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for it in items %}
            <tr>
                <td>{{ it.description }}</td>
                <td style="text-align: right;">
                    <span class="currency-symbol">$</span>{{ it.amount }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="totals-area">
        <div class="totals-row">
            <span>SUBTOTAL</span>
            <span class="currency-symbol">$</span>
            <span style="text-align: right;">{{ totals.subtotal }}</span>
        </div>
        <div class="totals-row">
            <span>TAX RATE</span>
            <span></span>
            <span style="text-align: right;">{{ totals.insurance }}%</span>
        </div>
        <div class="totals-row">
            <span>SALES TAX</span>
            <span class="currency-symbol">$</span>
            <span style="text-align: right;">{{ totals.other }}</span>
        </div>
        <div class="totals-row grand-total">
            <span>TOTAL</span>
            <span class="currency-symbol">$</span>
            <span style="text-align: right;">{{ totals.grand_total }}</span>
        </div>
    </div>

    <footer class="footer">
        <p>Make all checks payable to <strong>{{ company.name }}</strong>.</p>
        <p>If you have any questions concerning this invoice contact Angela at {{ company.phone }} or angela@example.com</p>
        <strong>Thank you for your business!</strong>
    </footer>

</body>
</html>